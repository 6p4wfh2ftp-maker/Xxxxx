<!doctype html>
<html lang="ro">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fațadă – randare AI</title>

<style>
:root{
  --bg:#0b0c10;
  --panel:#11131a;
  --ink:#e9eef7;
  --muted:#aab4c3;
  --line:#222738;
  --btn:#1f2937;
  --accent:#3b82f6;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:var(--bg);
  color:var(--ink);
}
header{
  padding:12px 16px;
  background:#0f1118;
  border-bottom:1px solid var(--line);
  font-weight:800;
}
main{
  display:grid;
  grid-template-columns:320px 1fr;
  gap:16px;
  padding:16px;
}
.panel{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:12px;
  padding:12px;
}
button{
  background:var(--btn);
  color:var(--ink);
  border:1px solid var(--line);
  padding:10px 14px;
  border-radius:10px;
  font-weight:700;
}
button.primary{
  background:var(--accent);
  border:none;
}
input,textarea{
  width:100%;
  background:#0f1220;
  color:var(--ink);
  border:1px solid var(--line);
  border-radius:8px;
  padding:8px;
}
canvas{
  width:100%;
  background:#000;
  border-radius:12px;
}
img{
  max-width:100%;
  border-radius:12px;
}
</style>
</head>

<body>
<header>Fațadă – editor simplu (AI)</header>

<main>
  <div class="panel">
    <p><b>1. Încarcă poza casei</b></p>
    <input type="file" id="img" accept="image/*" />

    <p style="margin-top:12px"><b>2. Descriere (prompt)</b></p>
    <textarea id="prompt" rows="4">Fațadă clasică cu coloane, ancadramente și cornișă</textarea>

    <p style="margin-top:12px">
      <button class="primary" onclick="genereaza()">Randare AI</button>
    </p>

    <p id="status" style="color:var(--muted)"></p>
  </div>

  <div class="panel">
    <p><b>Rezultat</b></p>
    <img id="rezultat" />
  </div>
</main>

<script>
const WORKER_URL = "https://fatada-render.6p4wfh2ftp.workers.dev/";

async function genereaza(){
  const fileInput = document.getElementById("img");
  const prompt = document.getElementById("prompt").value;
  const status = document.getElementById("status");
  const out = document.getElementById("rezultat");

  if(!fileInput.files[0]){
    alert("Încarcă o poză!");
    return;
  }

  status.textContent = "Se generează...";

  const fd = new FormData();
  fd.append("image", fileInput.files[0]);
  fd.append("prompt", prompt);

  const r = await fetch(WORKER_URL,{
    method:"POST",
    body:fd
  });
if(!r.ok){
  const t = await r.text();
  status.textContent = "Eroare: " + r.status + " / " + t;
  return;
}

  const blob = await r.blob();
  out.src = URL.createObjectURL(blob);
  status.textContent = "Gata ✅";
}
</script>

</body>
</html>
